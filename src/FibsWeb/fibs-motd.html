<link rel="import" href="bower_components/polymer/polymer.html" />

<dom-module id="fibs-motd">
  <template>
    <span>[[motd]]</span>
  </template>

  <script>
    Polymer({
      is: "fibs-motd",

      properties: {
        motd: {
          type: String,
          value: "",
          notify: true,
        },
      },

      ready: function () {
        var fibs = document.querySelector("fibs-app");
        fibs.addEventListener("CLIP_MOTD_BEGIN", e => this._onmessage(e));
        fibs.addEventListener("FIBS_MOTD", e => this._onmessage(e));
      },

      _onmessage: function (e) {
        switch (e.type) {
          case "CLIP_MOTD_BEGIN": this.motd = ""; break;
          case "FIBS_MOTD": this.motd += e.detail.message; break;
        }
      },
    });
  </script>
</dom-module>